<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Dashboard - Encryption Tool</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .container { max-width: 900px; margin: 0 auto; }
    .card { border: 1px solid #ddd; padding: 20px; border-radius: 6px; margin-bottom: 16px; }
    textarea { width: 100%; height: 140px; font-family: monospace; font-size: 14px; padding: 8px; }
    .row { display:flex; gap:12px; align-items:center; margin-top:8px; }
    button { padding: 8px 12px; }
    .note { color: #666; font-size: 13px; margin-top: 8px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Text Encryption / Decryption</h1>

    <!-- Substitution Cipher UI (kept) -->
    <div class="card">
      <h2>Substitution Cipher</h2>

      <label for="inputText">Input</label>
      <textarea id="inputText" placeholder="Masukkan teks di sini..."></textarea>

      <div class="row">
        <button id="encSub">Encrypt (Substitution)</button>
        <button id="decSub">Decrypt (Substitution)</button>
        <button id="clearBtn">Clear</button>
      </div>

      <label for="outputText" style="margin-top:12px; display:block;">Output</label>
      <textarea id="outputText" readonly placeholder="Hasil akan tampil di sini..."></textarea>

     
    </div>

    <!-- Server-side processed text (if any) -->
    {% if processed_text %}
    <div class="card">
      <h2>Server Result (Fernet)</h2>
      <label for="serverResult">Result</label>
      <textarea id="serverResult" readonly>{{ processed_text }}</textarea>
      <p class="note">Hasil di atas berasal dari operasi server (Fernet). UI untuk memicu operasi ini sengaja disembunyikan.</p>
    </div>
    {% endif %}
  </div>

  <script>
    // Simple substitution: Caesar cipher (shift = 3). Adjust if you have a different substitution mapping.
    function caesarShift(s, shift) {
      return s.replace(/[A-Za-z]/g, function(c) {
        const base = c <= 'Z' ? 65 : 97;
        return String.fromCharCode((c.charCodeAt(0) - base + shift + 26) % 26 + base);
      });
    }

    document.getElementById('encSub').addEventListener('click', function() {
      const inText = document.getElementById('inputText').value;
      document.getElementById('outputText').value = caesarShift(inText, 3);
    });

    document.getElementById('decSub').addEventListener('click', function() {
      const inText = document.getElementById('inputText').value;
      document.getElementById('outputText').value = caesarShift(inText, -3);
    });

    document.getElementById('clearBtn').addEventListener('click', function() {
      document.getElementById('inputText').value = '';
      document.getElementById('outputText').value = '';
    });
  </script>
</body>
</html>
